doc_title = "Simplates"
doc_next = ('Request', '/request/')

{% extends doc.html %}
{% block doc %}

<p>Simplates are Aspen&rsquo;s main attraction. Here&rsquo;s what a simplate
looks like:</p>

<pre lass="brush: python">"""This is my simplate.
"""
import random

^L
n = random.choice(range(10))
extra_excitement = "!" * n

^L
Greetings, program!{&#123; extra_excitement &#125;}</pre>

<p>The <code>^L</code> is an <a href="/form-feed/">ASCII form feed
    character</a>. It&rsquo;s also known as an ASCII page break, and so a
simplate is a file with three pages.</p>

<p>Assuming you&rsquo;ve gone through the <a href="/quick-start/">Quick
    Start</a>, edit index.html with the above content, then refresh. BUT
...</p>

<h3>Gotcha</h3>

<p>If you copy and paste the above, you need to replace the ^Ls with actual
<code>^L</code>s (you feel me?). If you don&rsquo;t, you&rsquo;ll get this in
your browser:</p>

<a title="Click for full size" href="sorry-program.png"
    class="screencap"><img src="sorry-program.small.png"
    /></a>

<p>And you&rsquo;ll get a template error and traceback in your console, ending
with this:</p>

<pre>NameError: global name 'extra_excitement' is not defined</pre>

<p>That&rsquo;s because the template page is looking for
<code>extra_excitement</code>, but this was never defined, because the second
Python page was never executed. Think about that sentence for a minute,
because once you understand it, you&rsquo;ve grokked simplates.</p>

<p>Here&rsquo;s <a href="/form-feed/">how to type a <code>^L</code></a> (hint:
it&rsquo;s ctrl-L).</p>

<p>In general the current tool support for page breaks is weak. For example,
you currently need to switch syntax highlighting manually:</p>

<table>
    <tr>
        <th>Vim</th>
        <td>:set filetype={python,html,etc.}</td>
    </tr>
</table>

<p>It would be great if editors could be configured to highlight pages
differently within a file. For Aspen simplates, we would want the first two
pages as Python, and the third according to the filename extension.</p>


<h3>Anyway</h3>

<p>Once you&rsquo;ve got the simplate right, refresh. Here&rsquo;s what it
should look like:</p>

<a title="Click for full size" href="extra-excitement.png"
    class="screencap"><img src="extra-excitement.small.png" /></a>
   
<p>You&rsquo;re off and running!</p>

<p>Give it a shot: Anything you define in the first two (Python) pages is
available in the third (template) page.</p>

<p>Can you guess what the difference is between the first two Python pages?
The first one is run once, on startup. It&rsquo;s designed for imports and
constants. The second is run once for each request.</p>

<p>The template page uses <a
    href="http://www.tornadoweb.org/documentation#templates">the template
    language from Tornado</a>. It&rsquo;s nice.</p>

<p>All three pages are cached in a compiled state. This cache is invalidated
whenever the underlying file changes, so simplate changes are always
immediately available. When you change Python libraries or configuration files,
aspen can restart automatically. But even this extra second or so is a drag
during development. When you change a simplate, the changes are always
available immediately, without restarting the server.</p>


<h3>Ack! Mixing logic and presentation?!?!?</h3>

<p>Well, I like to think that simplates bring code and presentation as close
together as possible <i>without</i> mixing them. There are no arbitrary Python
blocks inside of the template page, &agrave; la PHP/ASP.</p>

<p>Simplates are more like MVC, but with controllers, views, and templates
together in the same file instead of in separate files. Your models live in a
Python library, use an ORM, etc. And URL routing is done via the
filesystem. There&rsquo;s all around less boilerplate.</p>

<p>Simplates make it easy to kick off development of an app or feature of an
app. Simplates are, in fact, downright slippery. You won&rsquo;t be able to
stop innovating. You just open a single file and start writing Python,
JavaScript, CSS, HTML, SQL&mdash;whatever. It takes zero wiring to get it on
the network for the first time. And as apps/features mature, you will very
naturally move code out of your single simplate into separate Python libraries,
template files, JSON endpoint simplates, JavaScript libraries, CSS files,
etc.</p>

<p>Don&rsquo;t be scared! This isn&rsquo;t PHP! It&rsquo;s MVC with less
crap.</p>


<a name="#history"></a>
<h3>History</h3>

<p>My friend Steve came up with the original idea for simplates in the early
aughts, when we were running a web design shop together. We were heavily into
Zope and Plone at the time. This was in the Zope 2 days. The original idea was
something like, &ldquo;What if you could put a Script (Python) and a ZPT in THE
SAME FILE!?&rdquo; Steve has since switched careers to philosophy. I debuted
simplates in Aspen 0.8, which came out in December of &rsquo;07. With Aspen 0.9
I&rsquo;ve made simplates the main attraction.</p>

{% end %}
